import{_ as $,r as a,o as g,c as v,f as t,j as k,z as c,s as h,G as m,F as C,D as j,I as P,J as S,e as w}from"./index-qUL-dtZK.js";import{W as U}from"./_prefix-Cw2jshfM.js";const y=i=>(P("data-v-e9021081"),i=i(),S(),i),D={class:"page-container"},B={class:"info-bar"},L=y(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)),F=[L],I={class:"form-section"},O={class:"table-section"},R=y(()=>t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Content")])],-1)),V={class:"pagination"},H=["disabled"],M=["disabled"],N=["max"],z={__name:"ware",setup(i){const b=a("");g(async()=>{try{const e=await(await fetch(`${U}/count`)).json();b.value=e.number}catch(o){console.error("Error fetching number from backend:",o)}});const x=async()=>{try{const o=await fetch("http://localhost:5000/download-xlsx");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const e=await o.blob(),n=window.URL.createObjectURL(e),u=document.createElement("a");u.href=n,u.download="KnowledgeBase.xlsx",document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(n)}catch(o){console.error("Error downloading file:",o)}},s=a({name:"",content:""}),E=async()=>{try{const o=await fetch("http://localhost:5000/kb/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.value.name,content:s.value.content})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const e=await o.json();console.log("Success:",e),alert("Data submitted successfully!")}catch(o){console.error("Error:",o),alert("Error submitting data!")}},f=a([]),l=a(1),r=a(0),T=a(10);a("");const d=a(1),_=async(o=1)=>{try{const e=await fetch(`http://localhost:5000/api/data?page=${o}&page_size=${T.value}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();f.value=n.data,l.value=n.page,r.value=n.total_pages}catch(e){console.error("Error fetching data:",e)}},p=o=>{o>=1&&o<=r.value?_(o):alert(`请输入有效的页码 (1-${r.value})`)};return g(()=>{_()}),(o,e)=>(w(),v("div",D,[t("section",B,[t("span",null,[k("知识库共有 "),t("strong",null,c(b.value),1),k(" 条数据")]),t("button",{class:"icon-button",onClick:x,title:"下载数据"},F)]),t("section",I,[h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.name=n),placeholder:"请输入名称"},null,512),[[m,s.value.name]]),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.content=n),placeholder:"请输入内容"},null,512),[[m,s.value.content]]),t("button",{onClick:E},"提交")]),t("section",O,[t("table",null,[R,t("tbody",null,[(w(!0),v(C,null,j(f.value,n=>(w(),v("tr",{key:n.name},[t("td",null,c(n.name),1),t("td",null,c(n.content),1)]))),128))])]),t("div",V,[t("button",{disabled:l.value===1,onClick:e[2]||(e[2]=n=>p(l.value-1))},"上一页",8,H),t("span",null,"第 "+c(l.value)+" 页 / 共 "+c(r.value)+" 页",1),t("button",{disabled:l.value===r.value,onClick:e[3]||(e[3]=n=>p(l.value+1))},"下一页",8,M),h(t("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=n=>d.value=n),min:1,max:r.value,placeholder:"页码"},null,8,N),[[m,d.value,void 0,{number:!0}]]),t("button",{onClick:e[5]||(e[5]=n=>p(d.value))},"跳转")])])]))}},A=$(z,[["__scopeId","data-v-e9021081"]]);export{A as default};
